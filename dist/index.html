<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>draw_lang demos</title>
    
<script type="module" nonce="jGswF7AP3OP6VrsjgPVzEg==">
import init, * as bindings from '/wasm_shader_runner-6e1abc210d2a754a.js';
const wasm = await init('/wasm_shader_runner-6e1abc210d2a754a_bg.wasm');


window.wasmBindings = bindings;


dispatchEvent(new CustomEvent("TrunkApplicationStarted", {detail: {wasm}}));

</script>
    <style>
      html {
        width: 100%;
        height: 100%;
      }
      body {
        margin: 0px;
        width: 100%;
        height: 100%;
        background-color: black;
      }
      #canvas {
        background-color: black;
        width: 100%;
        height: 100%;
      }
    </style>
  <link rel="modulepreload" href="/wasm_shader_runner-6e1abc210d2a754a.js" crossorigin=anonymous integrity="sha384-EbdY8h5Ex7Nl3gLme+gUISmgN50lbtth5esqmKAtxNhLFH43rkQhp1OFgXhkHsEZ"><link rel="preload" href="/wasm_shader_runner-6e1abc210d2a754a_bg.wasm" crossorigin=anonymous integrity="sha384-J4VAyfNYeOnrZ1hcLBW4jycYZykQpJ/RAly6Vl5ubwq8iReWo2IiybxB47dx9iqS" as="fetch" type="application/wasm"></head>
  <body>
    <h1>Send Text to WebAssembly</h1>
    <textarea
      id="input-text"
      rows="20"
      cols="200"
      placeholder="Enter your shader code here..."
    ></textarea>
    <br />

    <button id="send-button">Apply shader code</button>

    <script type="module">
      import { set_fragment_shader } from "/wasm_shader_runner-6e1abc210d2a754a.js";

      const sendButton = document.getElementById("send-button");
      const inputText = document.getElementById("input-text");

      inputText.value = "#version 300 es \n\
precision mediump float;\n\
#pragma vscode_glsllint_stage : frag\n\
\n\
const float PI = 3.1415926;\n\
\n\
uniform vec2 u_resolution;\n\
uniform float u_time;\n\
\n\
in vec2 vUv;\n\
out vec4 frag_color;\n\
\n\
void main()\n\
{\n\
  frag_color = vec4(sin(vUv.x+u_time / 1000.0)/2.0+0.5, sin(vUv.y+u_time / 1000.0)/2.0+0.5, cos(vUv.x+vUv.y+u_time / 1000.0)/2.0+0.5, 1.0);\n\
}";

      sendButton.addEventListener("click", () => {
        const text = inputText.value;
        set_fragment_shader(text);
        console.log("Shader text applied");
      });
    </script>
  </body>
</html>
